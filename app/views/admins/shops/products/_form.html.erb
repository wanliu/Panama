<%= simple_form_for form, 
    :url => admins_products(form), 
    :remote => true,
    :html => {
        :class => "form-horizontal"
    } do |f| %>
    <%= f.input :name %>    
    <%= f.association :attachments, 
                      :as => :album, 
                      :upload_url => shop_admins_attachments_path(current_shop),                      
                      :collection => form.format_attachment %>    

		<%= render_styles %>

    <%= f.input :price %>    
    <%= f.association :category, :collection => current_shop.category, :value => form.category  , :as => :columnview %>
    <%= f.input :summary , as: :text %>
    <%= f.button :submit, :save %>
   
    <%= link_to_if(form.new_record?, :cancel, '#', :class => 'btn cancel') do 
        link_to :close, '#', :class => 'btn close'
    end %> 
<% end %>


<%= register_javascript :product_form_editor, :only => :ajax do %>
<script type="text/javascript">

	require(['jquery', 'backbone', 'rails.view'], function($, Backbone, Rails){
		var form = new Rails.FormView("form#<%= options_dom_id(form) %>", {
			model: <%= raw form.to_json %>
		});
	})

	require(['lib/table_bander'], function(tblBander){
		var bander = new tblBander.TableBander({
			// els : [$('div.colours'), $('div.sizes')],
			els    : [<%= filter_attribtues.map{ |item| "$('div.#{item.downcase}')" }.join(', ').html_safe %>],
			fields : [{title: '价格', value: 'price'}, {title: '数量', value: 'quantity'}],
			depth  : ['colour', 'size']
		})
	})

	<%= data_2_talbe %>

  require(['jquery', 'backbone', 'rails.view', 'nested_form'], function($, Backbone, Rails){
      var form = new Rails.FormView("form#<%= options_dom_id(form) %>", {
          model: <%= raw form.to_json %>
      });
  })

	require(['lib/colorpicker/js/bootstrap-colorpicker'], function(){
    $('.color').colorpicker();
  })

</script>
<% end %>