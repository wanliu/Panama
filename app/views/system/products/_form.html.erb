<%= stylesheet_link_tag "system/product" %>
<%= semantic_form_for product, :method => :put do |f| %>
  <%= f.inputs "Product" do %>
    <%= f.input :name %>
    <%= f.input :attachments, :as => :aplum, :img_version => "100x100", :collection => product.attachments %>
    <%= f.input :price, :class => :product_price %>
    <%= f.input :category, :as => :category %>
    <% if @content.blank? %>
	    <%= render_content(@content, locals: { category: @category }) %>
	<% end %>
    <%= f.input :summary %>
    <%= f.input :brand_name %>

    <%= f.input :description, :as => :text %>
  <% end %>
  <%= f.actions %>
<% end %>


<script>
		function admin_category_selector(el) {
			if (el instanceof jQuery) {
				this.el = el;
			} else {
				this.el = $(el);
			}
			var selector_el = this.el;

			this.el.find('ul').css('display', 'none');
			// this.el.find('a').attr('href', 'javascript: void(0);');

			this.el.find('li').on('mouseenter', function(e) {
				$(this).children('ul').show();
			})

			this.el.find('li').on('mouseleave', function(e) {
				$(this).find('ul').hide();
			})

			this.el.find('ul').on('mouseleave', function(e) {
				$(this).hide();
			})

			this.el.find('a').on('click', function(e) {
				var category_id = $(this).attr('data-id');
				$('input#product_category_id').val(category_id);

				var category_name = $(this).attr('data-name');
				$('input.mock_prodcut_category_id').val(category_name);

				selector_el.children('ul').hide();
				return false;
			})
		}

		$(function(){
			var el = $("div.category-parent-class");
			admin_category_selector(el);
			$('input.mock_prodcut_category_id').on('click', function(e){
				el.children('ul').show()
			})
		})
</script>
