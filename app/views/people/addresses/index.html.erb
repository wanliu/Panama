<% active_section :addresses %>

<div class='row-fluid'>
	<div class="span8 widget">
		<div class='row-fluid'>
			<h2 class="page-title">地址管理 <small>收货地址的清单</small></h2>      
		</div>
		<div class='row-fluid'>
			<div class="addresses-panel">
				<div class="addresses-button">
					<button href="#new_address" class="btn btn-primary" type="button" data-toggle="modal">添加地址</button>
					已有<%= @addresses.count %>个地址
				</div>

				<div class="address-list">
					<% unless flash.empty? %>
						<% flash.each do |f| %>
							<div class="alert alert-<%=f[0]%>">
								<button type="button" class="close" data-dismiss="alert">×</button>
								<%= f[1] %>
							</div>
						<% end %>
					<% end %>
					<% @addresses.each do |address| %>
						<%= render "show", :address => address %>
					<% end %>
				</div>

				<%= render :partial => "people/addresses/new", 
								:locals => {:address => @people.addresses.build} %>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	new Addresses({
		el: "div.addresses-panel"
	})
</script>