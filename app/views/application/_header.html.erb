<header class="page-header">
    <div class="navbar affix-top" data-spy="affix" data-offset-top="20">
        <div class="navbar-inner">
            <%= render "topbar" %>

<!--                     <div class="notifications pull-right">
                <div class="alert pull-right">
                    <a href="#" class="close" data-dismiss="alert">×</a>
                    <i class="icon-info-sign"></i> Check out Light Blue <a id="notification-link" href="#">settings</a> on the right!
                </div>
            </div> -->
        </div>
    </div>
</header>
<div id="active_dialog" class="active_dialog modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">发布您的活动</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
    <button class="btn btn-primary save_activity">确认</button>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function(){
    $(".save_activity").on('click', function(type){
      var $a = $(".activity_select>.active");
      var content_id = $a.find(">a").attr('href')
      var $form = $(".activity_forms>" + content_id + " form");

      $form.submit();

      $form.on("ajax:success", function(){
        $form[0].reset();
        $("#active_dialog").modal('hide');
      });

      $form.on("ajax:error", function(event, xhr, state){
        $form.replaceWith(xhr.responseText);
      });

    });
  });
</script> 