<section class="right-sidebar widget widget-tabs">
</section>

<!-- js模板 -->
<div id="right-sidebar-templates" style='display: none;'>
	<div class="main">
		<header>
			<ul class="nav nav-tabs">
			</ul>
			<div id="sidebar-settings" class="settings">
				<button type="button" data-value="icons" class="btn-icons btn btn-transparent btn-small">图标</button>
				<button type="button" data-value="auto" class="btn-auto btn btn-transparent btn-small">自动</button>
			</div>
		</header>
		<div class="body tab-content">
		</div>
	</div>
</div>

<script type="text/javascript">
	RealTimeContainerView.bind_runtime({
		realtime_url: '<%= faye_server_uri %>',
		token: '<%= current_user.im_token %>',
		current_user_login: '<%= current_user.login %>'
	});

	window.right_sidebar ||
	(window.right_sidebar = new RightSideBar({el: ".right-sidebar"}));

	right_sidebar.register(NotificationsContainerView,
						   FriendsContainerView);

  $(function(){
  	height = ($(window).height() - $(".right-sidebar header").outerHeight(true) - $(".right-sidebar .body").outerHeight(true) -10)/2
  	$('ul', '.notices-list').slimScroll({ 
  		height: height
  	}).on("mouseover", "li", function(event){
			$(this).after("<li class='clone'></li>")
			$(this).css("position", "absolute")
			$(this).css("margin-left", "-120px")
			$(".slimScrollDiv", '.notices-list').css("overflow", "visible")
			offset_top = $(this).siblings(".clone").offset().top
			$(this).offset({top: offset_top})
		}).on("mouseout", "li", function(event){
			$(this).css("position", "")
			$(this).css("margin-left", "")
			$(this).siblings(".clone").remove()
			$(".slimScrollDiv", '.notices-list').css("overflow", "hidden")
		}).on("mousewheel", "li", function(event){
			$(this).css("position", "")
			$(this).css("margin-left", "")
			$(this).siblings(".clone").remove()
		})
  })	
</script>
