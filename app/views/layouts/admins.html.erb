<!DOCTYPE html>
<%# http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither %>
<%= html_tag :class => "no-js" %>
<%= render "head" %>
<% content_for :module_stylesheet do %>
  <%= stylesheet_link_tag "admins" %>
  <%= javascript_include_tag "rangy-core-1.2.3" %>
  <%= javascript_include_tag "admins" %>
<% end %>
<body class="<%= controller.controller_name %>">
	  <%= yield :module_stylesheet %>

	<%= render "header" %>
	<%= render "flashes" %>
  	<div id="admin_content" class="container relative">
	    <div id="admin_main">
	      <div class="container-fluid">
	        <%= yield %>
	        <%= render "footer" %>
	      </div>
	    </div>
	    <%= side_bar :admin_left_side %>
	</div>
    <%#= render "javascripts" %>
	<%= javascripts_codes %>
	<script type="text/javascript">
		require(['ajaxify', 'panama'], function(Ajaxify, Panama){
			Ajaxify.start();

			<span class="badge badge-important">6</span>

			Panama.realtime.subscribe('/notice', function(payload){
				var notice = $("#pending");
				var badge = notice.find("badge");
				if (badge.length == 0)
					$("<span class=\"pull-right badge badge-important\">0</span>").appendTo(notice.find('a'));
				var number = parseInt(badge.text() || '0');
				badge.text(number++);
			});
		});
	</script>
</body>
</html>